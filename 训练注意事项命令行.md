#shell脚本
参考博文：[https://www.jb51.net/article/256177.htm](https://www.jb51.net/article/256177.htm)
##一、概念
> shell英文翻译过来是外壳的意思，作为计算机语言来理解可以认为它是操作系统的外壳。我们可以通过shell命令来操作和控制操作系统，比如Linux中的shell命令就包括ls、cd、pwd等等。
> shell是站在内核的基础上编写的一个应用程序，它连接了用户和Linux内核，从而让用户能够更加便捷、高效、安全的使用linux内核，这其实就是shell的本质。
> 使用专业术语的说法来解释，Shell其实是一个命令解释器，它通过接受用户输入的Shell命令来启动、暂停、停止程序的运行或对计算机进行控制。

##二、简单脚本
###2.1 脚本例子
我们创建一个test.sh的shell脚本文件，其中具体内容为下：

    1. #!/bin/bash
    2. echo hello
    
    * " # ”开头的就是注释，单行注释
    * <<EOF … EOF 或 :<<! … ! ：多行注释
    * #!/bin/bash ： 主要用于指定解释器
    * Linux中提供的shell解释器有：
    *    /bin/sh
    *   /bin/bash
    *   /usr/bin/sh
    *   /usr/bin/bash
###2.2运行脚本
####2.2.1 脚本文件无执行权限
这种情况下我们有三种方式来运行脚本：

手动在环境中开启指定解释器：sh test.sh

直接在当前环境中运行的shell中运行脚本:. test.sh

直接在当前环境中运行的shell中运行脚本:source test.sh

####2.2.2 脚本文件有执行权限
在这一部分由于我们假设脚本文件有可执行器权限，所以我们使用`chmod +x test.sh`为我们的`test.sh`文件增加了可执行权限。

我们知道当一个文件具有可执行权限时我们可以使用该文件的路径名直接运行该文件，有两种方式可以运行脚本：

1.绝对路径名运行脚本文件

绝对路径就是从根目录下开始记录文件路径名，是文件在计算机上真正存在的路径。（如果不知道你的文件路径名，可以在当前位置的shell中使用`pwd`查询当前所在位置）

2../相对路径名的格式运行脚本文件

相对路径是指以当前的文件作为起点，相较于当前目录的位置而被指向并且加以引用的文件资源。

比如我们知道`test.sh`文件的绝对路径为`/home/westos/Desktop/textcpp/test.sh`，那么当我们在testcpp文件夹中时，`test.sh`文件的相对路径为`test.sh`。

又因为`.`代表当前所在位置，故而为其实`./test.sh`其实就是该文件的绝对路径，只是表示的方式不同。


##三、基本语法
###3.1 变量
####3.1.1 变量类型
在shell中会同时存在三种类型变量。

* 局部变量：局部变量在脚本或命令中定义，仅在当前shell实例中有效，其他shell启动的程序不能访问局部变量。
* 环境变量：所有的程序，包括shell启动的程序，都能访问环境变量，有些程序需要环境变量来保证其正常运行。必要的时候shell脚本也可以定义     环境变量。
* shell变量：shell变量是由shell程序设置的特殊变量。shell变量中有一部分是环境变量，有一部分是局部变量，这些变量保证了shell的正常运行
* 
* 普通的用户自定义变量，如下面的name
* 系统预定义好的环境变量，如PATH
* 命令行变量，如 $#、$*
####3.1.2 变量操作
* 创建普通变量：name=“test”，组要注意的是等号两边不能有空格。
* 创建局部变量：local name=“test”，使用local修饰的变量在函数体外无法访问，只能在函数体中使用。
* 创建只读变量：name=“only_read” -> readonly name，这种变量不可以被修改。
* 使用变量：echo $name或者echo ${name}
* 删除变量：unset name，删除之后的变量无法被访问，需要注意无法删除只读变量。

####3.1.3字符串变量
#####3.1.3.1 字符串变量的创建

* 使用单引号创建：var='test'。
这种方式创建的变量只能原样输出，变量无效，我们可以借用c中的“字符串常量”的定义理解这种特性。除此以外，单引号中不能出现单独的单引号，转义也是不可以的。
* 使用双引号创建：var="my name is ${name}"，这种方式创建的字符串变量有效，也可以出现转义符。

#####3.1.3.2 拼接字符串
* 字面量拼接
str01="1""2"或者str01="1"'2'，这样就将1和2两个字符拼接在了一起。需要注意的是两个串之间不可以有空格。
* 变量拼接
str03=${part01}${part02}或str04=${part01}"end"或str05="${part01} ${part02}"这三种方式都可以拼接字符串变量。
* 命令拼接
str02= date“end”，这里的date是一个shell命令，需要使用引用，具体如下：

    str02 = 'date'"end"
#####3.1.3.3 获取字符串长度

1.使用`wc -L`命令

`wc -L`可以获取到当前行的长度，因此对于单独行的字符串可以用这个简单的方法获取，另外`wc -l`则是获取当前字符串内容的行数。

    echo "abc" |wc -L

2.使用`expr length`可以获取`string`的长度


    expr length ${<!--{C}%3C!%2D%2D%20%2D%2D%3E-->str}
3.`awk`获取域的个数

但是如果大于10个字符的长度时是否存在问题需要后面确认


    echo "abc" |awk -F "" '{print NF}'
4.通过`awk+length`的方式获取字符串长度


    echo “Alex”|awk '{print length($0)}'
5.通过`echo ${#name}`的方式

    name=Alex
    echo ${#name}

3.1.3.4 提取子字符串

1.如下方式：

代码	意义
`${varible##*string}	`从左向右截取最后一个string后的字符串
`${varible#*string}`	从左向右截取第一个string后的字符串
`${varible%%string*}`	从右向左截取最后一个string后的字符串
`${varible%string*}`	从右向左截取第一个string后的字符串
例，如下代码：

    $ MYVAR=foodforthought.jpg
    $ echo ${MYVAR##*fo}

    运行结果为rthought.jpg

2.使用`${varible:n1:n2}`

截取变量varible从n1到n2之间的字符串，可以根据特定字符偏移和长度，来选择特定子字符串，如下代码：

1
2
$ EXCLAIM=cowabunga
$ echo ${EXCLAIM:0:3}
运行结果最终显示cow。